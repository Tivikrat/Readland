{% load static %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>AddNewBook</title>
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/bootstrap/css/bootstrap.min.css" %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cookie">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&amp;subset=cyrillic">
    <link rel="stylesheet" href="{% static "/BootstrapStudioAssets/fonts/fontawesome-all.min.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/fonts/font-awesome.min.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/fonts/ionicons.min.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/fonts/material-icons.min.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/fonts/fontawesome5-overrides.min.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/Contact-Form-Clean.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/Footer-Basic.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/Footer-Clean.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/Form-Select---Full-Date---Month-Day-Year.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/Pretty-Footer.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/gradient-navbar-1.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/gradient-navbar.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/Navigation-Clean.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/Navigation-with-Search.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/styles-1.css" %}">
    <link rel="stylesheet" href="{% static "BootstrapStudioAssets/css/styles.css" %}">
</head>

<body>
<nav class="navbar navbar-light navbar-expand-md navigation-clean" id="wrap"
     style="background-color: #25263a;padding-top: 0px;padding-bottom: 0px;flex: 0 0 auto;">
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src="{% static "img/LogoLong.png" %}">
        </a>

        <!-- Add up -->

        <div class="d-md-block"
             style="width: 1px;height: 60px;background-color: #ffffff;margin-left: 20px;margin-right: 20px;min-height: 0px;max-height: 60px;"></div>
        <a class="d-block" href="/profile#grid" style="color: rgb(236,236,236);font-size: 25px;">Моя
            библиотека</a>
        <ul class="nav navbar-nav ml-auto">
            <!-- End -->


            <button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span
                    class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item d-block" role="presentation">
                        <form class="form-inline mr-auto" target="_self">
                            <div class="form-group d-flex justify-content-end"
                                 style="border-bottom: 3px solid white;padding-right: 5px;padding-left: 5px;">
                                <input
                                        class="form-control search-field" type="search" id="search-field"
                                        name="search"
                                        style="border: 0px;margin-top: 22px;background-color: #25263a;font-size: 20px;"
                                        placeholder="Search"
                                        onclick="window.location.href = '/books/search/'"><i
                                    class="fa fa-search"
                                    style="font-size: 40px;color: #e7dfed;font-weight: normal;font-style: normal;padding-top: 16px;"></i>
                            </div>
                        </form>
                    </li>
                    {#                <li class="nav-item" role="presentation"><a class="nav-link" href="#"#}
                    {#                                                            style="padding-right: 0px;padding-left: 0px;"><img#}
                    {#                        src="{% static "img/cart.png" %}" style="padding-left: 5px;padding-right: 5px;"></a></li>#}
                    {#                <li class="nav-item" role="presentation"><a class="nav-link" href="#" style="padding-left: 0px;"><img#}
                    {#                        src="{% static "img/smeshko.png" %}" style="padding-right: 5px;padding-left: 5px;"></a></li>#}
                    <li role="presentation" class="nav-item">
                        <div style="width: 2px;background-color: #a4a4a4;height: 60px;margin-right: 20px;margin-top: 10px;margin-left: 20px;"></div>
                    </li>
                    {% if anon %}
                        <li role="presentation" class="nav-item"><a class="btn btn-primary" role="button"
                                                                    href="/accounts/google/login"
                                                                    style="margin-top: 20px;background-color: #9b9bfd;">Логин</a>
                        </li>


                    {% else %}

                        <li role="presentation" class="nav-item">
                        <li style="padding-left:5px;"><a href="/profile">
                            <button class="btn btn-primary" type="submit"
                                    style="margin-top: 20px;background-color: #9b9bfd;">Мой профиль
                            </button>
                        </a>
                        </li>
                        <form action="/accounts/logout/" method="post">
                            <button class="btn btn-primary" type="submit"
                                    style="margin-top: 20px;background-color: #9b9bfd;">Выйти
                            </button>

                        </form>
                        {#                    <a class="btn btn-primary" role="button" href="/accounts/logout" style="margin-top: 20px;background-color: #9b9bfd;">Log Out</a>#}
                        </li>
                    {% endif %}
                </ul>
            </div>
        </ul>
    </div>
</nav>
<div role="dialog" tabindex="-1" class="modal fade" id="reset-modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="container">
                <div class="row">
                    <div class="col d-lg-flex justify-content-lg-end" style="padding-top: 10px;">
                        <button class="btn close" type="button" data-dismiss="modal" aria-label="Close"><i
                                class="fa fa-close"></i></button>
                    </div>
                </div>
                <div class="row" style="padding-top: 20px;">
                    <div class="col">
                        <h3 class="text-center">Вы действительно хотите отменить изменения? </h3>
                    </div>
                </div>
                <div class="row" style="padding-top: 20px;">
                    <div class="col d-lg-flex justify-content-lg-center" style="padding-bottom: 30px;">
                        <button class="btn border rounded-0 border-dark" type="button"
                                style="margin-right: 50px;font-size: 20px;"><strong>Сохранить</strong></button>
                        <button class="btn border rounded-0 border-dark" type="reset" style="font-size: 20px;"><strong>Отменить</strong>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col">
            <ol class="breadcrumb" style="background-color: rgba(233,236,239,0);">
                <li class="breadcrumb-item"><a href="/"><span><i class="fa fa-home" style="font-size: 20px;"></i></span></a>
                </li>
                <li class="breadcrumb-item"><a href="#"><span>{{ breadcrumb }}</span></a></li>
            </ol>
        </div>
    </div>
    <form class="row" style="margin-top: 15px;"
          action="" enctype="multipart/form-data" method="post">
        <div class="col-xl-3">
            <div><img class="d-block text-center align-items-center"
                      style="margin: auto;max-width: 210px;max-height: 300px; border: 2px solid #0b0f28; color: red;"
                      alt="Нажмите для выбора картинки"
                      onclick="$('#photo_load').click()" id="photo_img"
                      src="{{ book.photo.url }}">
                <input id="photo_load" type="file" name="photo" hidden value="{{ book.photo.url }}">
                {{ errors.photo }}
            </div>
            <div class="d-block text-center" style="margin: 20px">
                <div class="btn border rounded-0 border-dark" onclick="$('#photo_load').click()"
                     style="cursor: pointer; background-color: #ededed;font-style: normal;font-weight: bold;">
                    Задать фото
                </div>
            </div>
        </div>
        <div class="col-xl-7">
            <div>
                <h5>Название</h5>
                <input name="name" class="border rounded-0 border-dark" type="text" style="width: 400px;" required
                       value="{{ book.name }}">
                {{ errors.name }}
                <h5>Автор&nbsp;</h5>
                <input name="author" class="border rounded-0 border-dark" type="text" style="width: 190px;"
                       required value="{{ book.author }}">
                {{ errors.author }}
                <div style="margin-top: 15px;">
                    <div class="d-inline-block" style="margin-right: 40px;">
                        <h5>Тэг&nbsp;</h5>
                        <input name="tag" class="border rounded-0 border-dark" type="text" style="width: 190px;"
                               required value="{{ book.tag }}">
                        {{ errors.tag }}
                    </div>
                    <div class="d-inline-block" style="padding-right: 40px;">
                        <h5>Дата издания&nbsp;</h5>
                        <input name="date" class="border rounded-0 border-dark" type="date" style="width: 170px;"
                               required value="{{ book.date.year  }}-{% if book.date.month < 10 %}0{% endif %}{{ book.date.month }}-{% if book.date.day < 10 %}0{% endif %}{{ book.date.day }}">
                        {{ errors.date }}
                    </div>
                    <div class="d-inline-block">
                        <h5>Цена</h5>
                        <div class="d-inline-flex">
                            <input name="price" type="number" class="border rounded-0 border-dark" style="width: 100px;"
                                   required min="0" step="0.01" value="{{ book.price }}"/>
                            <h6 style="width: 50px;margin-bottom: 0px;padding-top: 3px;">&nbsp;UAH</h6>
                            {{ errors.price }}
                        </div>
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <h5>Описание&nbsp;</h5><textarea name="description" class="border rounded-0 border-dark"
                                                     style="width: 100%;height: 100px;" required>{{ book.description }}</textarea></div>
                {{ errors.description }}
            </div>
        </div>
    {% if book %}
    {% else %}
        <input id="file_load" type="file" name="file" required>
    {% endif %}
        <div class="d-block text-center" style="width: 100%; margin: auto; margin-top: 20px;">
            {#            <button class="btn border rounded-0 border-dark" type="button"#}
            {#                    style="margin-right: 50px;background-color: #ededed;font-weight: bold;"#}
            {#                    data-target="#reset-modal" data-toggle="modal">Отменить#}
            {#            </button>#}
            <button class="btn border rounded-0 border-dark" type="submit"
                    style="background-color: #ededed;font-style: normal;font-weight: bold;">
                Сохранить
            </button>
        </div>
    </form>
</div>
<script type="text/javascript">
    photo_src = document.getElementById("photo_img").src;
    document.getElementById("photo_load").onchange = function (event) {
        const files = event.target.files;
        if (files && files.length) {
            let fr = new FileReader();
            fr.onload = function () {
                document.getElementById("photo_img").src = fr.result;
            };
            fr.readAsDataURL(files[0]);
        } else {
            alert("Картинка не поддерживается. Выберите другую.");
            document.getElementById("photo_img").src = photo_src;
        }
    }
</script>
<script src="{% static "BootstrapStudioAssets/js/jquery.min.js" %}"></script>
<script src="{% static "BootstrapStudioAssets/bootstrap/js/bootstrap.min.js" %}"></script>
<script src="{% static "BootstrapStudioAssets/js/script.js" %}"></script>
</body>

</html>